# UC-002: Confirm Reservation

**Description**: Convert a temporary stock reservation into a permanent allocation, typically when an order is confirmed or payment is processed.

**Actor**: Order Management System, Payment System

**Preconditions**:

- Valid reservation exists and is not expired
- Reservation is in "pending" status

**Business Rules**:

- Confirmed reservations cannot be automatically released
- Confirmation reduces available stock permanently
- Associates reservation with an order ID

**Flow**:

1. System validates reservation exists and is not expired
2. System marks reservation as confirmed
3. System associates reservation with order ID
4. System publishes domain events for read model updates
5. System returns success confirmation

**Example Request**:

```bash
POST /api/reservations/confirm
Content-Type: application/json

{
  "reservationId": "res-789",
  "orderId": "order-456"
}
```

**Example Response**:

```json
{
  "success": true,
  "message": "Reservation confirmed successfully"
}
```

**Error Scenarios**:

- `404 Not Found`: Reservation not found
- `400 Bad Request`: Reservation already expired or confirmed
- `409 Conflict`: Reservation in invalid state
